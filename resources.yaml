---
# The latest image we want deployed. If images are running that have an
# appropriate prefix but are not running this image, they will be removed.
image: vggp-v50-j280-0939f8ec1b2e-main
image_id: af1feb68-4cbb-41b9-8dcc-b15cf6a43a14

network: bioinf
network_id: 7de249b6-6d32-44e3-b50c-291939868d2f
image_replace: false

secgroups:
  - ufr-ingress
  - egress

graceful: false
sshkey: cloud3

# The public key(s) we will accept when SSHing to a machine.
pubkeys:
  - "AAAAB3NzaC1yc2EAAAABIwAAAQEAuSG1VOumQhbJfOyalJjS4lPC8eeeL02ld/VI2BFApyMfwbB1QxehY3lMBXt/cBTzqU3MxgJQVzNr/AgjHa5rKn2hSGMfKAdaX2tG686k715bBjRm9rJNhmc8KSH9tVS35M0HwRXMfiGvSmb5qJ6utWRZe6RM2JMIbqqI5Oc4tbzPPVKk1+yvT1JdYuyqAOp2yvQbOqKaXmqOhPdPNaJZMI4o+UHmmb8FH6OTDY27G7X7u07ZPwVi1j+6ZFVMQZqg1RhUdg9kmHpHwMX7P6NcD4G9GsISHIh92eva9xgWYGiS0wUsmOWTNgAzzsfRZjMFep+jB2wup6QN7XpMw97eTw=="

deployment:
  worker-maintenance:
    count: 1
    flavor: m1.large
    group: maintenance
  worker-fastturnaround:
    count: 0
    flavor: m1.xlarge
    group: fast-turnaround
  worker-fetch:
    count: 2
    flavor: c1.c36m100
    group: upload
  worker-upload:
    count: 0
    flavor: m1.large
    group: upload
  worker-metadata:
    count: 2
    flavor: m1.large
    group: metadata
    cgroups:
      mem_limit_policy: soft
      mem_reserved_size: 1024
  worker-interactive:
    count: 8 #8
    flavor: c1.c36m100
    group: interactive
    docker_ready: true
    volume:
      size: 1024
      type: default
  worker-mothur:
    count: 3
    flavor: c1.c125m425
    group: compute_mothur
    cgroups:
      mem_limit_policy: hard
      mem_reserved_size: 4096
  worker-hifiasm:
    count: 1
    flavor: c1.c36m900
    group: compute_hifiasm
    cgroups:
      mem_limit_policy: soft
      mem_reserved_size: 2048
  worker-birna:
    count: 1
    flavor: c1.c36m100
    group: compute_birna
  worker-c28m450:
    count: 19 #19
    flavor: c1.c28m450
    group: compute_test
    docker_ready: true
    volume:
      size: 1024
      type: default
    cgroups:
      mem_limit_policy: soft
      mem_reserved_size: 1024
  worker-c36m100:
    count: 20 #31
    flavor: c1.c36m100
    group: compute
    cgroups:
      mem_limit_policy: hard
      mem_reserved_size: 4096
  worker-c36m225:
    count: 15 #15
    flavor: c1.c36m225
    group: compute
    cgroups:
      mem_limit_policy: hard
      mem_reserved_size: 4096
  worker-c36m975:
    count: 14 #14
    flavor: c1.c36m975
    group: compute
    docker_ready: true
    volume:
      size: 1024
      type: default
    cgroups:
      mem_limit_policy: soft
      mem_reserved_size: 2048
  worker-c64m2:
    count: 1 #1
    flavor: c1.c60m1975
    group: compute
    docker_ready: true
    volume:
      size: 1024
      type: default
  worker-c125m425:
    count: 48 #48
    flavor: c1.c125m425
    group: compute
    docker_ready: true
    volume:
      size: 1024
      type: default
    cgroups:
      mem_limit_policy: hard
      mem_reserved_size: 4096
  worker-c120m215:
    count: 0 #12
    flavor: c1.c120m215
    group: compute
    docker_ready: true
    volume:
      size: 1024
      type: default
    cgroups:
      mem_limit_policy: hard
      mem_reserved_size: 4096
  worker-gpu1:
    count: 0
    flavor: g1.gput4_g1c8m20
    group: compute_gpu
    gpu_ready: true
    docker_ready: true
    volume:
      size: 100
      type: default
      boot: true
  worker-gpubis:
    count: 0
    flavor: g1.n46_g1c8m20
    group: compute_gpu
    gpu_ready: true
    docker_ready: true
    volume:
      size: 100
      type: default
      boot: true
  # Training
  training-biol:
    count: 1
    flavor: c1.c28m225
    start: 2021-09-15
    end: 2022-12-15
    group: training-biol152_2021
  training-pvs4:
    count: 1
    flavor: c1.c28m225
    start: 2022-01-18
    end: 2022-05-31
    group: training-pvs4000
  training-raeg:
    count: 2
    flavor: c1.c28m225
    start: 2022-03-14
    end: 2022-04-08
    group: training-raeg2022
  training-arie:
    count: 1
    flavor: c1.c28m225
    start: 2022-03-02
    end: 2022-06-12
    group: training-arielgenomics
  training-sing:
    count: 1
    flavor: c1.c28m225
    start: 2022-03-07
    end: 2022-03-11
    group: training-singlecellebi22
  training-mar-:
    count: 2
    flavor: c1.c28m225
    start: 2022-03-21
    end: 2022-03-25
    group: training-mar-ur22
  training-mtub:
    count: 1
    flavor: c1.c28m225
    start: 2022-03-21
    end: 2022-03-25
    group: training-mtuberculosisngs
  training-mca2:
    count: 2
    flavor: c1.c28m225
    start: 2022-03-29
    end: 2022-03-30
    group: training-mca2022
  training-gtn-:
    count: 1
    flavor: c.c28m225
    start: 2022-03-14
    end: 2022-03-18
    group: training-gtn-tapas
  training-sib2:
    count: 1
    flavor: c.c28m225
    start: 2022-04-27
    end: 2022-04-27
    group: training-sib2022
  training-ces-:
    count: 1
    flavor: c.c28m225
    start: 2022-03-11
    end: 2022-03-11
    group: training-ces-pndb
